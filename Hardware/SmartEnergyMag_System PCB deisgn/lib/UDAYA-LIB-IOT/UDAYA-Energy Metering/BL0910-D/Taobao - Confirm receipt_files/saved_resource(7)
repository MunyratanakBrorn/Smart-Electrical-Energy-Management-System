KISSY.add("widget/event_center/index",["event"],function(e,i,t,a){var n=i("event");a.exports=e.mix({},n.Target)}),KISSY.add("widget/global/start",function(e,i,t,a){a.exports=[]}),KISSY.add("widget/debug/index",["uri"],function(e,i,t,a){var n=i("uri");a.exports={init:function(){new n(window.location.href).getQuery().get("tmDebug")&&e.isObject(window.globalInfo)&&alert("\u5f53\u524d\u53d1\u5e03\u7248\u672c\uff1a"+window.globalInfo.assetsTimestamp+"\n\u5f53\u524d\u670d\u52a1\u5668\u540d\uff1a"+window.globalInfo.serverName)}}}),KISSY.add("widget/browser_updater/index",["tbc/browser-updater/1.4.0/"],function(e,i,t,a){var n=i("tbc/browser-updater/1.4.0/");a.exports={init:function(){n.show()}}}),KISSY.add("widget/global/end",["widget/debug/index","widget/browser_updater/index"],function(e,i,t,a){a.exports=[i("widget/debug/index"),i("widget/browser_updater/index")]}),KISSY.add("widget/page_manager/index",["widget/event_center/index","widget/global/start","widget/global/end"],function(e,i,t,a){function n(i){e.isFunction(i.init)&&!i.init._inited&&(i.init(),i.init._inited=!0)}function d(i){if(e.isPlainObject(i))if(e.Config.debug)n(i);else try{n(i)}catch(t){e.log(t,"error")}}var o=i("widget/event_center/index"),r=i("widget/global/start"),l=i("widget/global/end");a.exports={initMods:function(i,t){e.each(r,function(e){d(e)}),e.each(i,function(e){d(e)}),e.each(l,function(e){d(e)}),t&&o.fire("mainScriptExecuted")}}}),KISSY.add("widget/identify_code_tip/index",["node","overlay"],function(e,i,t,a){function n(i){var t='<div class="wrap"><p>\u6536\u5230\u8d27\u540e\u8bf7\u8ba4\u771f\u6838\u5bf9\u673a\u5668\u8bc6\u522b\u7801\u662f\u5426\u548c\u4e0a\u65b9\uff08\u5356\u5bb6\u5f55\u5165\uff09\u7684\u4e00\u81f4\u3002\u5982\u4e0d\u4e00\u81f4\uff0c\u8bf7\u52ff\u786e\u8ba4\u4ed8\u6b3e\u5e76\u8054\u7cfb\u5356\u5bb6\u9000\u6362\u8d27\uff0c\u4ee5\u514d\u94b1\u8d27\u4e24\u5931\u3002</p><p><a href="{url} target="_blank">\u5982\u4f55\u67e5\u770b\u8bc6\u522b\u7801</a></p></div><s class="triangle"></s>';return e.substitute(t,{url:i.parent().attr("data-url")})}var d,o=i("node"),r=i("overlay");a.exports={init:function(){var e=o.all(".J_PincodeTip");e.length&&(d=new r.Popup({elCls:"tm-bubble-gray identify-code-tip",trigger:e,triggerType:"mouse",width:220,height:132}),d.on("show",function(){var e=d.get("currentTrigger");d.set("content",n(e)),d.set("align",{node:e,points:["bl","tl"],offset:[-20,10]})}))}}}),KISSY.add("tm/confirm/page/mods/check_safari/index",["node","ua"],function(e,i,t,a){function n(){var e="safari"===o.shell&&parseInt(o.safari,10)>=5,i="apple"===o.mobile&&navigator.userAgent.indexOf("Safari")!=-1;return e||i}var d=i("node"),o=i("ua");a.exports={init:function(){var e=d.all("#alipay-iframe"),i=d.all("#alipay-safari"),t=i.all("a");n()?localStorage.getItem("safari-visited")?e.show():(i.show(),t.on("click",function(){localStorage.setItem("safari-visited","true")})):e.show()}}}),KISSY.add("tm/confirm/page/mods/partial_ship/index",["node"],function(e,i,t,a){function n(i){if(i&&e.isPlainObject(i)){var t=parseFloat(i.totalPrice,10),a=i.freight,n=s.all(".total-price")||s.all(".get-money");a?(s.all(".add-post-fee").show(),t+=parseFloat(a,10)):s.all(".add-post-fee").hide(),n.one("strong").text(t.toFixed(2))}}function d(){r(o()?!0:!1)}function o(){return e.some(s.all(".selector"),function(e){if(e.checked)return!0})}function r(e){var i=s.all("#pay-box");e?(i.all(".msg-partialship").hide(),i.all("ul").add("iframe","#pay-box").show()):(i.all(".msg-partialship").show(),i.all("ul").add("iframe","#pay-box").hide())}function l(){var i=s.all(".order-item").all("input"),t=e.every(i,function(e){if(e.disabled)return!0});t&&s.one(".all").attr("disabled","disabled")}var s=i("node");a.exports={init:function(){s.one("body").hasClass("partial-ship")&&(r(!1),l(),s.all(".order").all("input").on("click",function(){d()}),e.namespace("TB.app.Trade.Callback",!0),TB.app.Trade.Callback.CalculatePrice=n)}}}),KISSY.add("tm/confirm/page/index",["widget/page_manager/index","widget/identify_code_tip/index","./mods/check_safari/index","./mods/partial_ship/index"],function(e,i){var t=i("widget/page_manager/index"),a=[i("widget/identify_code_tip/index"),i("./mods/check_safari/index"),i("./mods/partial_ship/index")];e.ready(function(){t.initMods(a,!0)})});